pnw_mvp_v2/
├─ README.md                               # Project overview, architecture summary, phase status, and Phase 4 plan
├─ ARCHITECTURE.md                         # Deep technical architecture, trust/privacy model, and layering rationale
├─ BUILD_ORDER.md                          # Recommended phase sequencing and implementation order
├─ PHASE3_SIGNOFF.md                       # Formal Phase 3 completion checklist and guardrails
├─ LICENSE.md                              # Proprietary license terms
├─ directory                               # This repo map with per-file notes
│
├─ src/
│  ├─ layer1/
│  │  ├─ README.md                         # Layer 1 program index and canonical responsibilities
│  │  ├─ LAYER1_INTERFACE.md               # Frozen Layer 1 callable surface (records/transitions/functions)
│  │  │
│  │  ├─ pnw_router.aleo/
│  │  │  ├─ README.md                      # Router-level narrative and scope
│  │  │  ├─ main.leo                       # On-chain orchestration entrypoints for key Layer 1 flows
│  │  │  └─ program.json                   # Program manifest/config for pnw_router
│  │  │
│  │  ├─ pnw_name_registry.aleo/
│  │  │  ├─ README.md                      # `.pnw` naming model and rules
│  │  │  ├─ main.leo                       # Worker/employer name registration, ownership, sellback logic
│  │  │  └─ program.json                   # Program manifest/config for name registry
│  │  │
│  │  ├─ employer_license_registry.aleo/
│  │  │  ├─ README.md                      # Employer license verification gating model
│  │  │  ├─ main.leo                       # Verified status + license hash assertions/lookups
│  │  │  └─ program.json                   # Program manifest/config for employer license registry
│  │  │
│  │  ├─ worker_profiles.aleo/
│  │  │  ├─ README.md                      # Worker profile commitment model
│  │  │  ├─ main.leo                       # Create/update worker profile records + profile anchor checks
│  │  │  └─ program.json                   # Program manifest/config for worker profiles
│  │  │
│  │  ├─ employer_profiles.aleo/
│  │  │  ├─ README.md                      # Employer profile commitment model
│  │  │  ├─ main.leo                       # Create/update employer profile records + profile anchor checks
│  │  │  └─ program.json                   # Program manifest/config for employer profiles
│  │  │
│  │  ├─ employer_agreement.aleo/
│  │  │  ├─ README.md                      # Employment agreement lifecycle narrative
│  │  │  ├─ main.leo                       # Offer/accept/pause/terminate/resume/supersede agreement transitions
│  │  │  └─ program.json                   # Program manifest/config for employer agreement
│  │  │
│  │  ├─ payroll_core.aleo/
│  │  │  ├─ README.md                      # Canonical payroll execution model (USDCx + anchors)
│  │  │  ├─ main.leo                       # Execute payroll settlement + anti-double-pay guards + audit hash anchor
│  │  │  └─ program.json                   # Program manifest/config for payroll core
│  │  │
│  │  ├─ paystub_receipts.aleo/
│  │  │  ├─ README.md                      # Private paystub receipt minting and correction/reversal model
│  │  │  ├─ main.leo                       # Worker/employer receipt records + receipt anchor mapping utilities
│  │  │  └─ program.json                   # Program manifest/config for paystub receipts
│  │  │
│  │  └─ payroll_audit_log.aleo/
│  │     ├─ main.leo                       # Minimal hash-only audit event anchoring + height lookups
│  │     └─ program.json                   # Program manifest/config for payroll audit log
│  │
│  └─ layer2/
│     ├─ payroll_nfts.aleo/
│     │  ├─ README.md                      # Payroll NFT commitment model (cycle/quarterly/YTD/EOY)
│     │  ├─ main.leo                       # Mint/revoke/supersede payroll NFTs + status/anchor utility transitions
│     │  └─ program.json                   # Program manifest/config for payroll NFTs
│     │
│     ├─ credential_nft.aleo/
│     │  ├─ README.md                      # Credential NFT model for capability/authorization proofs
│     │  ├─ main.leo                       # Mint/revoke credential NFTs + scope anchoring and status checks
│     │  └─ program.json                   # Program manifest/config for credential NFTs
│     │
│     └─ audit_nft.aleo/
│        ├─ README.md                      # Audit authorization NFT model and attestation anchoring
│        ├─ main.leo                       # Authorization mint/revoke/expiry + audit attestation anchor transitions
│        └─ program.json                   # Program manifest/config for audit NFTs
│
└─ portal/
   ├─ tsconfig.phase3.json                 # Focused no-emit typecheck gate for Phase 3 planning surfaces
   └─ src/
      ├─ README.md                         # Portal architecture and folder responsibilities
      │
      ├─ config/
      │  ├─ README.md                      # Config philosophy and usage notes
      │  ├─ env.ts                         # Env parsing/validation + network selection
      │  └─ programs.ts                    # Program identifier registry by network
      │
      ├─ types/
      │  ├─ aleo_types.ts                  # Shared scalar aliases/guards (Field, Address, U8/U16/U32/U64/U128)
      │  ├─ aleo_records.ts                # Opaque record contracts used by planners/adapters
      │  └─ node.d.ts                      # Minimal NodeJS process/env type shims for TS compile
      │
      ├─ commitments/
      │  ├─ README.md                      # Commitments subsystem narrative and constraints
      │  ├─ canonical_types.ts             # Canonical doc field/type contracts for encoding/commitments
      │  ├─ canonical_encoder.ts           # Deterministic canonical encoding + commitment builder
      │  ├─ hash.ts                        # Domain-separated BLAKE3 hashing utilities
      │  ├─ merkle.ts                      # Deterministic Merkle tree construction helpers
      │  └─ token_id.ts                    # Deterministic token ID derivation utilities
      │
      ├─ payroll/
      │  ├─ README.md                      # Payroll aggregation pipeline overview (normalize → summarize → mint prep)
      │  ├─ types.ts                       # Payroll domain types/contracts for normalized and indexed data
      │  ├─ normalize.ts                   # Receipt normalization into deterministic base events
      │  ├─ indexer.ts                     # Deterministic grouping/sorting/indexing of normalized events
      │  ├─ paystub_builder.ts             # Canonical single-payroll paystub document construction
      │  ├─ summary_builder.ts             # Canonical quarterly/YTD/EOY summary document construction
      │  └─ mint_payroll_nfts.ts           # Build deterministic Layer 2 payroll NFT mint payloads (planning only)
      │
      ├─ workflows/
      │  ├─ README.md                      # Planning-only workflow narratives and constraints
      │  ├─ payroll_workflow.ts            # Canonical payroll workflow planner (prechecks + execute_payroll)
      │  ├─ audit_workflow.ts              # Audit authorization workflow planner and outputs
      │  ├─ onboarding_workflow.ts         # Worker/employer onboarding workflow planners
      │  └─ profile_update_workflow.ts     # Worker/employer profile update workflow planners
      │
      ├─ router/
      │  ├─ layer1_router.ts               # Typed Layer 1 call-plan surface + adapter execution handoff
      │  └─ layer2_router.ts               # Typed Layer 2 call-plan surface + stable helper planners
      │
      └─ adapters/
         ├─ layer1_adapter.ts              # Layer 1 step→program/transition endpoint resolver contract
         └─ layer2_adapter.ts              # Layer 2 step→program/transition endpoint resolver contract
